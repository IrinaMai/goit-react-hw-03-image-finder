(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{28:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n(19),o=n.n(c),i=(n(28),n(8)),s=n(3),l=n(7),u=function(e){var t=e.handleSubmitQuery,n=Object(r.useState)(""),c=Object(l.a)(n,2),o=c[0],i=c[1];return Object(a.jsx)("header",{className:"Searchbar",children:Object(a.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),t(o)},children:[Object(a.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(a.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(a.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){i(e.target.value)},value:o})]})})},m=function(e){var t=e.listImgGallery,n=e.modalOpen,r=function(e){var t=e.target.dataset.url;n(t)};return Object(a.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,n=e.largeImageURL,c=e.previewURL,o=e.tags;return Object(a.jsx)("li",{className:"ImageGalleryItem",children:Object(a.jsx)("img",{src:c,"data-url":n,alt:o,className:"ImageGalleryItem-image",onClick:r})},t)}))})},j=n(10),b=n.n(j),d=n(20),p=n(21),g=n.n(p),O="https://pixabay.com/api/",h="19506242-1f89b350085f2df58b37812a8",f=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,a=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:1,e.next=3,g.a.get("".concat(O,"?q=").concat(t,"&page=").concat(n,"&key=").concat(h,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.data.hits}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t=e.modalClose,n=e.lageImg;Object(r.useEffect)((function(){return window.addEventListener("keydown",c),function(){return window.removeEventListener("keydown",c)}}));var c=function(e){"Escape"===e.code&&t()};return Object(a.jsx)("div",{className:"Overlay",children:Object(a.jsx)("div",{className:"Modal",children:Object(a.jsx)("img",{src:n,alt:"",className:"modalIMG"})})})},x=function(e){var t=e.handleLoadMoreBtn;return Object(a.jsx)("button",{type:"button",className:"Button",onClick:function(){t()},children:"Load More"})},S=n(22),y=n.n(S),w=function(){return Object(a.jsx)(y.a,{type:"ThreeDots",color:"#3f51b5",height:80,width:80,className:"loadSpinner"})},I={query:"",page:1,imgList:[],modalIsOpen:!1,loadSpinner:!1,lageUrlState:"",errorState:""};var L=function(){var e=Object(r.useState)(Object(s.a)({},I)),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[n.page]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(u,{handleSubmitQuery:function(e){e&&(c((function(e){return Object(s.a)(Object(s.a)({},e),{},{loadSpinner:!0})})),f(e).then((function(t){c((function(n){return Object(s.a)(Object(s.a)({},n),{},{imgList:Object(i.a)(t),query:e,page:2,loadSpinner:!1})}))})))}}),n.imgList.length>0&&Object(a.jsx)(m,{listImgGallery:n.imgList,modalOpen:function(e){c((function(t){return Object(s.a)(Object(s.a)({},t),{},{modalIsOpen:!0,lageUrlState:e})}))}}),n.loadSpinner&&Object(a.jsx)(w,{}),n.imgList.length>0&&Object(a.jsx)(x,{handleLoadMoreBtn:function(){c((function(e){return Object(s.a)(Object(s.a)({},e),{},{loadSpinner:!0})})),f(n.query,n.page).then((function(e){c((function(t){return Object(s.a)(Object(s.a)({},t),{},{imgList:[].concat(Object(i.a)(t.imgList),Object(i.a)(e)),page:t.page+1,loadSpinner:!1})}))}))}}),n.modalIsOpen&&Object(a.jsx)(v,{modalClose:function(){c((function(e){return Object(s.a)(Object(s.a)({},e),{},{modalIsOpen:!1})}))},lageImg:n.lageUrlState})]})};o.a.render(Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(L,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.baf3b461.chunk.js.map